import{a as e,y as a,l as n,b as t,s as r,j as s,V as l,p as c}from"./vendor.d718a546.js";!function(e=".",a="__import__"){try{self[a]=new Function("u","return import(u)")}catch(n){const t=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[a]=e=>new Promise(((n,s)=>{const l=new URL(e,t);if(self[a].moduleMap[l])return n(self[a].moduleMap[l]);const c=new Blob([`import * as m from '${l}';`,`${a}.moduleMap['${l}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){s(new Error(`Failed to import: ${e}`)),r(o)},onload(){n(self[a].moduleMap[l]),r(o)}});document.head.appendChild(o)})),self[a].moduleMap={}}}("/");const o=()=>e("header",null,e("img",{src:"/logo.4e5aea09.svg",width:64,height:64,className:"header__logo",alt:"logo"}),e("div",{className:"header__text-container"},e("div",{className:"header__title"},"qrscan-pwa"),e("div",{className:"header__description"},"QR Code Scanner as a PWA")));const u=()=>e("footer",null,e("span",{className:"footer__text"},"Source-code available at"),e("a",{href:"http://github.com/kutsan/qrcode-pwa",className:"footer__project-link",target:"_blank",rel:"noopener noreferrer"},"kutsan/qrcode-pwa"));const d=({active:a,decodedData:n,onNewScan:t})=>{if(!a)return null;const r=new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/g);let s;return s=""===n?e("span",{className:"results__empty"},"There is no data to show."):null!==n.match(r)?e("a",{className:"results__link",href:n,target:"_blank",rel:"noopener noreferrer"},n):n,e("div",{className:"results"},e("div",{className:"results__data"},s),e("div",{className:"results__button-container"},e("button",{type:"button",className:"results__button",onClick:t},e("img",{className:"results__scan-icon",src:"/scan.8f5d45de.svg",alt:"New Scan"}),e("span",null,"New Scan"))))};const i=()=>e(a,null,e("div",{className:"scanner-border scanner-border--top-left"}),e("div",{className:"scanner-border scanner-border--top-right"}),e("div",{className:"scanner-border scanner-border--bottom-left"}),e("div",{className:"scanner-border scanner-border--bottom-right"})),m=({active:a,onSuccessfulScan:l})=>{const c=r(null),o=r(null),{stream:u,error:d,status:m,stopMediaStream:p,startMediaStream:v}=(()=>{const[e,a]=n(null),[r,s]=n(null),[l,c]=n("pending"),o=()=>{c("pending"),navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then((e=>{a(e),c("resolved")})).catch((e=>{s(e),c("rejected")}))};return t((()=>{o()}),[]),{stream:e,error:r,status:l,stopMediaStream:()=>{var a;null!==(a=e)&&"getTracks"in a&&(e.getTracks().forEach((a=>{a.stop(),e.removeTrack(a)})),c("stopped"))},startMediaStream:o}})(),_=()=>{if(null===o||null===o.current||null===c||null===c.current)return;const e=o.current.getContext("2d");if(null===e)return;const{width:a,height:n}=o.current;e.drawImage(c.current,0,0,a,n);const t=e.getImageData(0,0,a,n),r=s(t.data,a,n);null===r?setTimeout(_,500):(l(r.data),p(),c.current.srcObject=null)};return t((()=>{"resolved"===m&&null!==c&&null!==c.current&&(c.current.srcObject=u,c.current.play().catch((()=>{})))}),[m,u]),t((()=>{a&&"stopped"===m&&v()}),[a,m,v]),e("div",{className:"scanner "+(a?"":"scanner--hidden")},e("div",{className:"scanner__aspect-ratio-container"},e("canvas",{ref:o,className:"scanner__canvas"}),e("video",{ref:c,onCanPlay:()=>{null!==o&&null!==o.current&&null!==c&&null!==c.current&&(o.current.width=c.current.videoWidth,o.current.height=c.current.videoHeight,null!==d||_())},className:"scanner__video"}),e(i,null)),e("div",{className:"scanner-tip"},e("div",null,"Scan a QR code with your camera to see what it says.")))};l(e(c,null,e((()=>{const[t,r]=n(null);return e(a,null,e(o,null),e("main",null,e(m,{active:null===t,onSuccessfulScan:e=>r(e)}),null!==t&&e(d,{active:null!==t,decodedData:t,onNewScan:()=>r(null)})),e(u,null))}),null)),document.getElementById("root"));
