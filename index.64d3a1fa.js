import{r as e,j as t,a}from"./vendor.54809142.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const r=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,c)=>{const s=new URL(e,r);if(self[t].moduleMap[s])return a(self[t].moduleMap[s]);const l=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){c(new Error(`Failed to import: ${e}`)),n(o)},onload(){a(self[t].moduleMap[s]),n(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/");const r=()=>e.createElement("header",null,e.createElement("img",{src:"/logo.4e5aea09.svg",width:64,height:64,className:"header__logo",alt:"logo"}),e.createElement("div",{className:"header__text-container"},e.createElement("div",{className:"header__title"},"qrscan-pwa"),e.createElement("div",{className:"header__description"},"QR Code Scanner as a PWA")));const n=()=>e.createElement("footer",null,e.createElement("span",{className:"footer__text"},"Source-code available at"),e.createElement("a",{href:"http://github.com/kutsan/qrcode-pwa",className:"footer__project-link",target:"_blank",rel:"noopener noreferrer"},"kutsan/qrcode-pwa"));const c=({active:t,decodedData:a,onNewScan:r})=>{if(!t)return null;const n=new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/g);let c;return c=""===a?e.createElement("span",{className:"results__empty"},"There is no data to show."):a.match(n)?e.createElement("a",{className:"results__link",href:a,target:"_blank",rel:"noopener noreferrer"},a):a,e.createElement("div",{className:"results"},e.createElement("h2",{className:"results__title"},"Decoded Data"),e.createElement("div",{className:"results__data"},c),e.createElement("div",{className:"results__button-container"},e.createElement("button",{type:"button",className:"results__button",onClick:r},e.createElement("img",{className:"results__scan-icon",src:"/scan.8f5d45de.svg",alt:"New Scan"}),e.createElement("span",null,"New Scan"))))};const s=()=>e.createElement(e.Fragment,null,e.createElement("div",{className:"scanner-border scanner-border--top-left"}),e.createElement("div",{className:"scanner-border scanner-border--top-right"}),e.createElement("div",{className:"scanner-border scanner-border--bottom-left"}),e.createElement("div",{className:"scanner-border scanner-border--bottom-right"})),l=({active:a,onSuccessfulScan:r})=>{const n=e.useRef(null),c=e.useRef(null),{stream:l,error:o,status:m,stopMediaStream:u,startMediaStream:d}=(()=>{const[t,a]=e.useState(null),[r,n]=e.useState(null),[c,s]=e.useState("pending"),l=async()=>{s("pending");try{const e=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}});a(e),s("resolved")}catch(e){n(e),s("rejected")}};return e.useEffect((()=>{l()}),[]),{stream:t,error:r,status:c,stopMediaStream:()=>{var e;null!==(e=t)&&"getTracks"in e&&(t.getTracks().forEach((e=>{e.stop(),t.removeTrack(e)})),s("stopped"))},startMediaStream:l}})(),i=async()=>{if(!(c&&c.current&&n&&n.current))return;const e=c.current.getContext("2d");if(!e)return;const{width:a,height:s}=c.current;e.drawImage(n.current,0,0,a,s);const l=e.getImageData(0,0,a,s),o=t(l.data,a,s);null===o?setTimeout(i,500):(r(o.data),u(),n.current.srcObject=null)};return e.useEffect((()=>{"resolved"===m&&n&&n.current&&(n.current.srcObject=l,n.current.play())}),[m,l]),e.useEffect((()=>{a&&"stopped"===m&&d()}),[a]),e.createElement("div",{className:"scanner "+(a?"":"scanner--hidden")},e.createElement("div",{className:"scanner__aspect-ratio-container"},e.createElement("canvas",{ref:c,className:"scanner__canvas"}),e.createElement("video",{ref:n,onCanPlay:()=>{c&&c.current&&n&&n.current&&(c.current.width=n.current.videoWidth,c.current.height=n.current.videoHeight,null!==o||i())},className:"scanner__video"}),e.createElement(s,null)),e.createElement("div",{className:"scanner-tip"},e.createElement("div",null,"Scan a QR code with your camera to see what it says.")))},o=()=>{const[t,a]=e.useState(null);return e.createElement(e.Fragment,null,e.createElement(r,null),e.createElement("main",null,e.createElement(l,{active:null===t,onSuccessfulScan:e=>a(e)}),null!==t&&e.createElement(c,{active:null!==t,decodedData:t,onNewScan:()=>a(null)})),e.createElement(n,null))};a.render(e.createElement(e.StrictMode,null,e.createElement(o,null)),document.getElementById("root"));
