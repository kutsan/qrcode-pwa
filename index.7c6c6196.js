import{a as e,y as n,l as a,b as t,s as r,j as s,V as l,p as c}from"./vendor.d718a546.js";!function(e=".",n="__import__"){try{self[n]=new Function("u","return import(u)")}catch(a){const t=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[n]=e=>new Promise(((a,s)=>{const l=new URL(e,t);if(self[n].moduleMap[l])return a(self[n].moduleMap[l]);const c=new Blob([`import * as m from '${l}';`,`${n}.moduleMap['${l}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){s(new Error(`Failed to import: ${e}`)),r(o)},onload(){a(self[n].moduleMap[l]),r(o)}});document.head.appendChild(o)})),self[n].moduleMap={}}}("/");const o=()=>e("header",null,e("img",{src:"/logo.4e5aea09.svg",width:64,height:64,className:"header__logo",alt:"logo"}),e("div",{className:"header__text-container"},e("div",{className:"header__title"},"qrscan-pwa"),e("div",{className:"header__description"},"QR Code Scanner as a PWA")));const u=()=>e("footer",null,e("span",{className:"footer__text"},"Source-code available at"),e("a",{href:"http://github.com/kutsan/qrcode-pwa",className:"footer__project-link",target:"_blank",rel:"noopener noreferrer"},"kutsan/qrcode-pwa"));const d=({active:n,decodedData:a,onNewScan:t})=>{if(!n)return null;const r=new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/g);let s;return s=""===a?e("span",{className:"results__empty"},"There is no data to show."):null!==a.match(r)?e("a",{className:"results__link",href:a,target:"_blank",rel:"noopener noreferrer"},a):a,e("div",{className:"results"},e("div",{className:"results__data"},s),e("div",{className:"results__button-container"},e("button",{type:"button",className:"results__button",onClick:t},e("img",{className:"results__scan-icon",src:"/scan.8f5d45de.svg",alt:"New Scan"}),e("span",null,"New Scan"))))};const i=()=>e(n,null,e("div",{className:"scanner-border scanner-border--top-left"}),e("div",{className:"scanner-border scanner-border--top-right"}),e("div",{className:"scanner-border scanner-border--bottom-left"}),e("div",{className:"scanner-border scanner-border--bottom-right"})),m=({active:n,onSuccessfulScan:l})=>{const c=r(null),o=r(null),{stream:u,error:d,status:m,stopMediaStream:p,startMediaStream:v}=(()=>{const[e,n]=a(null),[r,s]=a(null),[l,c]=a("pending"),o=()=>{c("pending"),navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then((e=>{n(e),c("resolved")})).catch((e=>{s(e),c("rejected")}))};return t((()=>{o()}),[]),{stream:e,error:r,status:l,stopMediaStream:()=>{var n;null!==(n=e)&&"getTracks"in n&&(e.getTracks().forEach((n=>{n.stop(),e.removeTrack(n)})),c("stopped"))},startMediaStream:o}})(),_=()=>{if(null===o||null===o.current||null===c||null===c.current)return;const e=o.current.getContext("2d");if(null===e)return;const{width:n,height:a}=o.current;e.drawImage(c.current,0,0,n,a);const t=e.getImageData(0,0,n,a),r=s(t.data,n,a);null===r?setTimeout(_,500):(l(r.data),p(),c.current.srcObject=null)};return t((()=>{"resolved"===m&&null!==c&&null!==c.current&&(c.current.srcObject=u,c.current.play().catch(console.error))}),[m,u]),t((()=>{n&&"stopped"===m&&v()}),[n,m,v]),e("div",{className:"scanner "+(n?"":"scanner--hidden")},e("div",{className:"scanner__aspect-ratio-container"},e("canvas",{ref:o,className:"scanner__canvas"}),e("video",{ref:c,onCanPlay:()=>{null!==o&&null!==o.current&&null!==c&&null!==c.current&&(o.current.width=c.current.videoWidth,o.current.height=c.current.videoHeight,null!==d||_())},className:"scanner__video"}),e(i,null)),e("div",{className:"scanner-tip"},e("div",null,"Scan a QR code with your camera to see what it says.")))};l(e(c,null,e((()=>{const[t,r]=a(null);return e(n,null,e(o,null),e("main",null,e(m,{active:null===t,onSuccessfulScan:e=>r(e)}),null!==t&&e(d,{active:null!==t,decodedData:t,onNewScan:()=>r(null)})),e(u,null))}),null)),document.getElementById("root"));
